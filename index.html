<!DOCTYPE html>
<html>
  <head>
    <style>
      /* Set the size of the div element that contains the map */
      #map {
        height: 400px; /* The height is 400 pixels */
        width: 100%; /* The width is the width of the web page */
      }
    </style>
  </head>
  <body>
    <h3>My Google Maps Demo</h3>
    <!--The div element for the map -->
    <div id="map"></div>
    <script>
      // Initialize and add the map
      let locations = [
        {
          eventType: "collab",
          description: "Collab I do. Collab we shall.",
          time: "2pm",
          eventLocationName: "Sculpture Park",
          location: { lat: 47.616512, lng: -122.355507 },
        },
        {
          eventType: "collab",
          description: "Collab I do. Collab we shall.",
          time: "2pm",
          eventLocationName: "Sculpture Park",
          location: { lat: 47.6205, lng: -122.355507 },
        },
        {
          eventType: "gig",
          description: "Gigs I give. Gigs you will have.",
          time: "2pm",
          eventLocationName: "Space Needle",
          location: { lat: 47.6205, lng: -122.3493 },
        },
        {
          eventType: "live",
          description: "Live I am. Live I do.",
          time: "2pm",
          eventLocationName: "Century Link Field",
          location: { lat: 47.5952, lng: -122.3316 },
        },
        {
          eventType: "jam",
          description: "Jam I am. Jam I do.",
          time: "2pm",
          location: { lat: 47.613838, lng: -122.319748 },
        },
      ];

      function initMap() {
        const mapLocation = { lat: 47.6062, lng: -122.3321 };
        const map = new google.maps.Map(document.getElementById("map"), {
          zoom: 13,
          center: mapLocation,
          styles: [
            {
              elementType: "geometry",
              stylers: [
                {
                  color: "#f5f5f5",
                },
              ],
            },
            {
              elementType: "labels.icon",
              stylers: [
                {
                  visibility: "off",
                },
              ],
            },
            {
              elementType: "labels.text.fill",
              stylers: [
                {
                  color: "#616161",
                },
              ],
            },
            {
              elementType: "labels.text.stroke",
              stylers: [
                {
                  color: "#f5f5f5",
                },
              ],
            },
            {
              featureType: "administrative.land_parcel",
              elementType: "labels.text.fill",
              stylers: [
                {
                  color: "#bdbdbd",
                },
              ],
            },
            {
              featureType: "poi",
              stylers: [
                {
                  visibility: "off",
                },
              ],
            },
            {
              featureType: "poi",
              elementType: "geometry",
              stylers: [
                {
                  color: "#eeeeee",
                },
              ],
            },
            {
              featureType: "poi",
              elementType: "labels.text.fill",
              stylers: [
                {
                  color: "#757575",
                },
              ],
            },
            {
              featureType: "poi.park",
              stylers: [
                {
                  visibility: "off",
                },
              ],
            },
            {
              featureType: "poi.park",
              elementType: "geometry",
              stylers: [
                {
                  color: "#e5e5e5",
                },
              ],
            },
            {
              featureType: "poi.park",
              elementType: "labels.text.fill",
              stylers: [
                {
                  color: "#9e9e9e",
                },
              ],
            },
            {
              featureType: "road",
              elementType: "geometry",
              stylers: [
                {
                  color: "#ffffff",
                },
              ],
            },
            {
              featureType: "road.arterial",
              elementType: "labels.text.fill",
              stylers: [
                {
                  color: "#757575",
                },
              ],
            },
            {
              featureType: "road.highway",
              elementType: "geometry",
              stylers: [
                {
                  color: "#dadada",
                },
              ],
            },
            {
              featureType: "road.highway",
              elementType: "labels.text.fill",
              stylers: [
                {
                  color: "#616161",
                },
              ],
            },
            {
              featureType: "road.local",
              elementType: "labels.text.fill",
              stylers: [
                {
                  color: "#9e9e9e",
                },
              ],
            },
            {
              featureType: "transit.line",
              elementType: "geometry",
              stylers: [
                {
                  color: "#e5e5e5",
                },
              ],
            },
            {
              featureType: "transit.station",
              elementType: "geometry",
              stylers: [
                {
                  color: "#eeeeee",
                },
              ],
            },
            {
              featureType: "water",
              elementType: "geometry",
              stylers: [
                {
                  color: "#c9c9c9",
                },
              ],
            },
            {
              featureType: "water",
              elementType: "labels.text.fill",
              stylers: [
                {
                  color: "#9e9e9e",
                },
              ],
            },
          ],
        });
        function determineMarkerColor(data) {
          if (data.eventType === "collab") {
            return "#F00";
          } else if (data.eventType === "gig") {
            return "#f97";
          } else if (data.eventType === "jam") {
            return "#36f";
          } else if (data.eventType === "live") {
            return "#8b3";
          }
        }

        let marker = locations.map(function (location, i) {
          return new google.maps.Marker({
            position: location.location,
            map: map,
            icon: {
              path: google.maps.SymbolPath.CIRCLE,
              scale: 5.5,
              fillColor: determineMarkerColor(location),
              fillOpacity: 1,
              strokeWeight: 0.4,
            },
          });
        });
        var markerCluster = new MarkerClusterer(map, marker, {
          imagePath:
            "https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m",
        });
      }
    </script>
    <script src="https://unpkg.com/@google/markerclustererplus@5.1.0/dist/markerclustererplus.min.js"></script>

    <script
      async
      defer
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB2Dl-6u39xaEQFRS7YZbi3eXsk8KJszJA&callback=initMap"
    ></script>
  </body>
</html>
